@page "/"

<h3>Home</h3>

<EditForm Model="@formModel" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <TextInput Id="input1" Label="First Name" LabelPosition="top" Placeholder="Enter your first name" 
               Value="@formModel.FirstName" ValueChanged="@(val => formModel.FirstName = val)" IsValid="@firstNameValid" />
    
    <TextInput Id="input2" Label="Last Name" LabelPosition="left" Placeholder="Enter your last name" 
               Value="@formModel.LastName" ValueChanged="@(val => formModel.LastName = val)" IsValid="@lastNameValid" />
    
    <TextInput Id="input3" Label="" LabelPosition="none" Placeholder="Enter your email" 
               Value="@formModel.Email" ValueChanged="@(val => formModel.Email = val)" IsValid="@emailValid" />
    
    <button type="submit">Submit</button>
</EditForm>

@code {
    private FormModel formModel = new FormModel();
    private bool firstNameValid = true;
    private bool lastNameValid = true;
    private bool emailValid = true;

    public class FormModel
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Email { get; set; }
    }

    private void HandleValidSubmit()
    {
        // Handle form submission
        Console.WriteLine("Form Submitted");
    }

    private void ValidateForm()
    {
        firstNameValid = !string.IsNullOrWhiteSpace(formModel.FirstName);
        lastNameValid = !string.IsNullOrWhiteSpace(formModel.LastName);
        emailValid = !string.IsNullOrWhiteSpace(formModel.Email);

        // Trigger re-rendering
        StateHasChanged();
    }

    private void HandleSubmit()
    {
        ValidateForm();

        if (firstNameValid && lastNameValid && emailValid)
        {
            // Do something on valid submission
            Console.WriteLine("Form is valid");
        }
        else
        {
            // Handle invalid form
            Console.WriteLine("Please fill out all required fields.");
        }
    }
}
