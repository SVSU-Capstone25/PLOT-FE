@inherits LayoutComponentBase

<div class="@Class" id="@Id">
    <!-- Toggle Button -->
    <button class="btn btn-light toggle-btn shadow-sm" id='toggle-btn' onclick="toggleSidebar()">
        <i class="fa-solid fa-chevron-right"></i>
    </button>

    <!-- Sidebar -->
    <aside class="collapse-sidebar">
        @Body
    </aside>
</div>

<script>

    function adjustSidebar() {
        const navbar = document.querySelector('.top-row'); // Adjust selector based on your navbar
        const sidebar = document.querySelector('.collapse-sidebar');
        const toggleBtn = document.querySelector('.toggle-btn');
        const root = document.documentElement;

        if (navbar && sidebar) {
            const navbarHeight = navbar.offsetHeight;
            const sidebarHeight = sidebar.offsetHeight; // Get actual sidebar height
            const sidebarWidth = sidebar.offsetWidth;

            // Update sidebar position
            sidebar.style.top = navbarHeight + "px";
            sidebar.style.height = `calc(100vh - ${navbarHeight}px)`;

            // Position toggle button at the center of the sidebar
            toggleBtn.style.top = `45%`;
        }
    }

    function toggleSidebar() {
        const sidebar = document.querySelector('.collapse-sidebar');
        const toggleBtn = document.getElementById('toggle-btn');
        sidebar.classList.toggle('collapsed');
        toggleBtn.classList.toggle('collapsed');

        window.adjustSidebar();

    }


    window.addEventListener('load', () => {
        setTimeout(adjustSidebar, 100); // Ensure layout has fully rendered
    });

    window.addEventListener('resize', adjustSidebar);
</script>

@code {
    [Parameter]
    public string? Id {get; set;}

    [Parameter]
    public string? Class {get; set;}
    
    
    
}