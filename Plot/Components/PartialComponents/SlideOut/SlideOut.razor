.
@*
    Filename:- SlideOut.razor
    Part of Project: Plot

    File Purpose:
    The purpose of this file is to create a slide out element.

    Program Purpose:
    The purpose of PLOT is to allow users to easily create, manage,
    and allocate floorsets for Plato's Closet.

    Author: Andrew Kennedy (2/7/2025)
*@

@inherits LayoutComponentBase

<div class="@Class" id="@Id">
    <!-- Toggle Button -->
    <button class="btn btn-light toggle-btn shadow-sm" id='toggle-btn' onclick="toggleSidebar()">
        <i class="fa-solid fa-chevron-right"></i>
    </button>

    <!-- Sidebar -->
    <aside class="collapse-sidebar">
        @Body
    </aside>
</div>

<script>
    /*
        This function dynamically adjusts the sidebar's dimensions
        based on the height of the navbar.
    */
    function adjustSidebar() {
        const navbar = document.querySelector('.top-row'); 
        const sidebar = document.querySelector('.collapse-sidebar');

    function adjustSidebar() {
        const navbar = document.querySelector('.top-row'); // Adjust selector based on your navbar
        const sidebar = document.querySelector('.collapse-sidebar');
        const toggleBtn = document.querySelector('.toggle-btn');
        const root = document.documentElement;

        if (navbar && sidebar) {

            const navbarHeight = navbar.offsetHeight;
            const sidebarHeight = sidebar.offsetHeight; // Get actual sidebar height
            const sidebarWidth = sidebar.offsetWidth;

            // Update sidebar position
            sidebar.style.top = navbarHeight + "px";
            sidebar.style.height = `calc(100vh - ${navbarHeight}px)`;

            // Position toggle button at the center of the sidebar
            toggleBtn.style.top = `45%`;
        }
    }

    /*
        This function toggles the collapsed state of the sidebar.
    */
    function toggleSidebar() {
        const sidebar = document.querySelector('.collapse-sidebar');
        const toggleBtn = document.getElementById('toggle-btn');
        sidebar.classList.toggle('collapsed');
        toggleBtn.classList.toggle('collapsed');

        window.adjustSidebar();

    }


    window.addEventListener('load', () => {
        setTimeout(adjustSidebar, 100); // Ensure layout has fully rendered
    });

    window.addEventListener('resize', adjustSidebar);
</script>

@code {
    [Parameter]
    public string? Id {get; set;}

    [Parameter]
    public string? Class {get; set;}    
    [Parameter]
    public RenderFragment? ChildContent {get; set;}

}